\section{Definitions}
\label{sec:definition}
Let $\mathbb{O} = \{o_1 ,o_2,...,o_n\}$ denote the set of objects in concern, $\mathbb{T} = \{1,2,...,m\}$ be the descritized sequence of timestamps. We use $T[i]$ to denote the $i^{th}$ entry in a time sequence.

Given a time sequence $T \subseteq \mathbb{T}$, let $|T|$ be the cardinality of the sequence. We say a sequence $T$ is \emph{(fully)consecutive}
if and only if $\forall T[i] \in T, T[i+1] \in T$, $T[i+1] = T[i] + 1$. A subsequence $T^m$ is \emph{maximally consecutive}~\cite{li2015platoon} wrt. $T$ if and only if $T^m \subseteq T$ and $\nexists T^{m'}, T^m \subseteq T^{m'} \wedge T^{m'} $ is consecutive. For example, let $T=\{1,2,3,5,6\}$, then $T_1=\{1,2,3\}$ and $T_2=\{5,6\}$ are two maximally consecutive subsequences wrt. $T$. We then define the $L$-consecutiveness as follows:

\begin{definition}[$L$-consecutive]
A time sequence $T$ is $L$-consecutive iff $\forall$ its maximal consecutive subsequences $T^m$, $|T^m| \geq L$.
\end{definition}

Take $T=\{1,2,3,5,6\}$ as an example. $T$ is not $3$-consecutive since $\{5,6\}$ is a maximally consecutive subsequence with cardinality less than $3$. $T$ is $2$-consecutive since both its two maximally consecutive subsequences are of the sizes greater or equal to $2$. It is notable that, for a sequence $T$, all its maximally consecutive subsequences are non-overlapping. 

We then define the $G$-separateness as follows:

\begin{definition}[$G$-separated]
A time sequence $T$ is $G$-separated iff $\forall T[i],T[i+1] \in T, T[i+1]-T[i] \leq G$
\end{definition}

Take $T={1,2,3,5,6}$ as an example. $T$ is $2$-separated since the gap between its maximally consecutive subsequnces is $5-3=2$. However, $T$ is not $1$-separated. Indeed, $1$-separated infers that $T$ is fully consecutive.


Given a time sequence $t$, objects locations at $t$ collectively forms a \emph{snapshot}\footnote{Missing timestamps can be interpreted using linear interpolation~\cite{jeung2008convoy}}.Objects in a snapshot can thus be clustered based on the
closeness of their locations. Let $C_t(o_i)$ be the cluster which $o_i$ belongs to at time $t$, we can then define the generalized co-moving pattern as follows:

\begin{definition}[Generalized Co-Movement Pattern]
A \emph{generalized co-movement pattern} $GCMP(M,K,L,G)= \langle O,T \rangle$ is a pair containing an object set $O\subseteq \mathbb{O}$ and a sequence $T \subseteq \mathbb{T}$, with the following constraints:
\begin{enumerate}
\item{Closeness: $\forall o_i,o_j \in O, \forall t \in T, C_t(o_i) = C_t(o_j)$}
\item{Significance: $|O| \geq M$}
\item{Duration: $|T| \geq K$}
\item{Consecutiveness: $T$ is $L$-consecutive}
\item{Separateness: $T$ is $G$-separated}
\end{enumerate} 
\end{definition}

The generalized co-movement pattern retains the patterns that discovered by existing techniques (convoy, swarm and platoon). In particular, by setting $G=|T|$, we achieve the \emph{platoon} pattern. By setting $G=|T|,L=1$, we achieve the \emph{swarm} pattern. Finally by setting $G=1$, we achieve the \emph{convoy} pattern. In addition to covering existing patterns, the generalized co-movement pattern avoids the \emph{miss-pattern} problem in \emph{platoon} pattern. As suggested in Figure~\ref{fig:platoon_weakpoint}, $\{100,101\}$ will be included in the platoon pattern, however since they're too far away in temporal domain, this pattern is not prominent. By setting appropriate $G$, we are able to prune these two snapshots. Notice that such a new pattern cannot be modeled by existing patterns.
 
It is notable that the number of patterns in GCMP is exponential. To control the number of output patterns, we noticed that, for two pattern result $P_1,P_2$, if $P_1.O \subseteq P_2.O$ and $P_2$ is a proper pattern, then $P_1$ is also a proper pattern. Based on this observation, we define the \emph{closed generalized co-movement pattern} as follows:
\begin{definition}[Closed Generalized Co-moving Pattern]
A generalized co-moving pattern $P=\langle O, T \rangle$ is a closed generalized co-moving pattern if and only if there does not exists another generalized co-moving pattern $P'$ s.t. $P'.O \supseteq P.O$.
\end{definition}
For example, let $n=2,k=2,l=1,g=1$, the pattern $\{o_1,o_2\}\{1,2,3,4\}$ is not a closed pattern, while $\{o_1,o_2,o_3\}$ $\{1,2,3,4\}$ is a closed pattern.The closed pattern avoids to output duplicate information, thus making the result patterns more compact. 
%For example, let $n=2,k=2,l=1,g=1$, the pattern $\{o_3,o_4\} \{1,2,3\}$ in Figure~\ref{fig:related_work} is not a closed pattern, while $\{o_3, o_4\} \{t_1,t_2,t_3\}$ is a closed pattern. 

Although the generalized co-moving pattern is free from the clustering methods used at each snapshot, as suggested in~\cite{jeung2008convoy}, the \emph{density}-based clustering method is better in detecting objects with arbitrary spatio-shaped clusters. Therefore in this paper, we mainly consider density-based clustering.

The goal of this paper is to present a parallel solution for discovering GCMP from large-scale trajectory data.

Before we move on to the algorithmic part, we list the notations that are used in the following sections.

\begin{table}
\begin{tabular}{|c|c|}
\hline 
$Tr_i$ & Trajectory of object $i$\\ 
\hline
$S_t$ & Snapshot of objects at time $t$ \\
\hline 
$\mathbb{O}$ & Set of objects \\ 
\hline 
$\mathbb{T}$ & Global time sequence \\
\hline
$C_t(o)$ & the cluster of object $o$ at time $t$ \\
\hline 
$Sr_i $ &  The star structure of object $i$ \\
\hline 
\end{tabular} 
\caption{Notions that will be used}
\end{table}